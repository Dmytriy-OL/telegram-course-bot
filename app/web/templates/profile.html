{% extends "base.html" %}

{% block title %}–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å ‚Äî LinguaPro{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{{ url_for('static', path='/css/profile.css') }}">
{% endblock %}

{% block content %}
<section class="profile-container">
    {% if user %}
    <div class="profile-card">
        <!-- –ê–≤–∞—Ç–∞—Ä -->
        <div class="avatar-section">
            {% if user.avatar and user.avatar.file_path %}
                <img src="{{ url_for('static', path='media/avatars/' + user.avatar.file_path) }}" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar">
            {% else %}
                <img src="{{ url_for('static', path='media/content/default-avatar.png') }}" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar">
            {% endif %}
            <label for="avatar" class="upload-label">üì∑ –ó–º—ñ–Ω–∏—Ç–∏ —Ñ–æ—Ç–æ</label>
            <input type="file" id="avatar" name="avatar" accept="image/*" form="profileForm" style="display: none;">
        </div>

        <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
        <form id="profileForm" method="post" action="/profile" enctype="multipart/form-data" class="profile-form">
            <div class="form-group">
                <label for="name">–Ü–º‚Äô—è</label>
                <input type="text" id="name" name="name" value="{{ user.name or '' }}">
            </div>

            <div class="form-group">
                <label for="surname">–ü—Ä—ñ–∑–≤–∏—â–µ</label>
                <input type="text" id="surname" name="surname" value="{{ user.surname or '' }}">
            </div>

            <div class="form-group">
                <label for="username">–ù—ñ–∫</label>
                <input type="text" id="username" name="username" value="{{ user.username or '' }}">
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" value="{{ user.email }}" readonly class="readonly">
                <small>Email –Ω–µ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏</small>
            </div>

            <div class="form-group">
                <label for="birth_date">–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
                <input type="date" id="birth_date" name="birth_date" value="{{ user.birth_date.strftime('%Y-%m-%d') if user.birth_date else '' }}">
            </div>

            <button type="submit" class="btn save-btn">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
        </form>

        {% if message %}
        <p class="message success">{{ message }}</p>
        {% endif %}
        {% if error %}
        <p class="message error">{{ error }}</p>
        {% endif %}
    </div>

    {% else %}
    <p class="message error">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π</p>
    {% endif %}
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', path='/js/profile.js') }}"></script>
{% endblock %}
